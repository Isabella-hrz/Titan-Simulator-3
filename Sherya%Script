-- Whitelist
local whitelist = {
    ["MissSherya"] = true,
    ["luis_109170"] = true,
    ["JohanAxelRS"] = true,
    ["elpepeandasuelto300"] = true,
    ["Alexqwq124"] = true,
    ["Cesar0_o1"] = true,
}

local player = game.Players.LocalPlayer

if not whitelist[player.Name] then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Acceso Denegado",
        Text = "No estás autorizado para usar este script.",
        Duration = 10
    })
    return
end

-- Carga D-Ray (ajusta la URL o ruta si es distinta)
local dRay = loadstring(game:HttpGet("https://raw.githubusercontent.com/D-Ray-Library/d-ray-ui/main/init.lua"))()

local window = dRay:CreateWindow({
    Title = "Sherya Script",
    Size = UDim2.new(0, 660, 0, 660),
    Theme = {
        Accent = Color3.fromRGB(200, 0, 255),
    }
})

-- Crear pestañas (tabs)
local mainTab = window:AddTab("Main")
local miscTab = window:AddTab("Misc")
local killerTab = window:AddTab("Killer")
local playersTab = window:AddTab("Players")
local creditsTab = window:AddTab("Credits")

-- Variables para los toggles
local autoPunch = false
local autoOrb = false
local autoDemonSword = false
local autoRebirth = false
local speedValue = 16
local autoSpeedEnabled = false
local infiniteJumpEnabled = false
local noClipEnabled = false
local autoPunchAll = false
local autoStomp = false
local autoKill = false

-- Funciones auxiliares que usas (equipar herramientas, etc.)
local function equipPunch()
    local backpack = player:WaitForChild("Backpack")
    local character = player.Character or player.CharacterAdded:Wait()
    local tool = backpack:FindFirstChild("Punch") or character:FindFirstChild("Punch")
    if tool and tool.Parent ~= character then
        tool.Parent = character
        task.wait(0.2)
    end
end

local function equipStomp()
    local character = player.Character or player.CharacterAdded:Wait()
    local backpack = player:WaitForChild("Backpack")
    if character:FindFirstChildOfClass("Tool") and character:FindFirstChildOfClass("Tool").Name == "Stomp" then
        return
    end
    local stompTool = backpack:FindFirstChild("Stomp")
    if stompTool then
        stompTool.Parent = character
    end
end

-- Main Tab switches y lógica

mainTab:AddToggle("Auto Punch", false, function(state)
    autoPunch = state
    if autoPunch then equipPunch() end
    task.spawn(function()
        while autoPunch do
            pcall(function()
                local character = player.Character or player.CharacterAdded:Wait()
                local tool = character:FindFirstChild("Punch")
                if tool then
                    tool:Activate()
                else
                    equipPunch()
                end
            end)
            task.wait(0.1)
        end
    end)
end)

mainTab:AddToggle("Auto Orb", false, function(state)
    autoOrb = state
    if autoOrb then
        task.spawn(function()
            while autoOrb do
                for _, v in pairs(workspace:GetChildren()) do
                    if v.Name == "Drop" and v:IsA("BasePart") then
                        v.CFrame = player.Character.HumanoidRootPart.CFrame
                    end
                end
                task.wait(1)
            end
        end)
    end
end)

mainTab:AddToggle("Auto (Demon Sword)", false, function(state)
    autoDemonSword = state
    task.spawn(function()
        while autoDemonSword do
            pcall(function()
                local character = player.Character or player.CharacterAdded:Wait()
                local backpack = player:WaitForChild("Backpack")
                local tool = character:FindFirstChild("Demon Sword") or backpack:FindFirstChild("Demon Sword")
                if tool and tool.Parent ~= character then
                    tool.Parent = character
                end
                if tool and tool:FindFirstChild("Activate") then
                    tool:Activate()
                end
            end)
            task.wait(0.2)
        end
    end)
end)

mainTab:AddToggle("Auto Rebirth", false, function(state)
    autoRebirth = state
    task.spawn(function()
        while autoRebirth do
            pcall(function()
                local gui = player.PlayerGui
                local rebirthButton = gui:FindFirstChild("RENACER", true)
                if rebirthButton and rebirthButton:IsA("TextButton") and rebirthButton.Visible then
                    fireclickdetector(rebirthButton)
                    task.wait(1)
                    local typeBox = gui:FindFirstChildWhichIsA("TextBox", true)
                    if typeBox and typeBox.Visible then
                        typeBox.Text = "yes"
                        typeBox:CaptureFocus()
                        task.wait(0.5)
                        typeBox:ReleaseFocus()
                    end
                    local confirmarBtn = gui:FindFirstChild("CONFIRMAR", true)
                    if confirmarBtn and confirmarBtn:IsA("TextButton") and confirmarBtn.Visible then
                        confirmarBtn:Activate()
                    end
                end
            end)
            task.wait(3)
        end
    end)
end)

-- Misc Tab

miscTab:AddInput("Auto Speed", speedValue, function(text)
    speedValue = tonumber(text) or 16
    if player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = speedValue
    end
end)

miscTab:AddToggle("Auto Set Speed", false, function(state)
    autoSpeedEnabled = state
    if autoSpeedEnabled then
        if player.Character and player.Character:FindFirstChild("Humanoid") then
            player.Character.Humanoid.WalkSpeed = speedValue
        end
        if autoSpeedConnection then autoSpeedConnection:Disconnect() end
        autoSpeedConnection = player.CharacterAdded:Connect(function(character)
            local humanoid = character:WaitForChild("Humanoid")
            humanoid.WalkSpeed = speedValue
        end)
    else
        if autoSpeedConnection then
            autoSpeedConnection:Disconnect()
            autoSpeedConnection = nil
        end
    end
end)

miscTab:AddToggle("Infinite Jump", false, function(state)
    infiniteJumpEnabled = state
    if infiniteJumpEnabled then
        infiniteJumpConnection = game:GetService("UserInputService").JumpRequest:Connect(function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
            end
        end)
    else
        if infiniteJumpConnection then
            infiniteJumpConnection:Disconnect()
            infiniteJumpConnection = nil
        end
    end
end)

miscTab:AddToggle("No Clip", false, function(state)
    noClipEnabled = state
    if noClipEnabled then
        noClipLoop = game:GetService("RunService").Stepped:Connect(function()
            for _, part in pairs(player.Character:GetDescendants()) do
                if part:IsA("BasePart") and part.CanCollide then
                    part.CanCollide = false
                end
            end
        end)
    else
        if noClipLoop then
            noClipLoop:Disconnect()
            noClipLoop = nil
        end
        for _, part in pairs(player.Character:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end)

miscTab:AddButton("Chat Espía", function()
    loadstring(game:HttpGet("https://pastebin.com/raw/Vv9Yw3Uw"))()
end)

miscTab:AddButton("Anti AFK", function()
    local VirtualUser = game:GetService("VirtualUser")
    player.Idled:Connect(function()
        VirtualUser:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
        task.wait(1)
        VirtualUser:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
    end)
    game.StarterGui:SetCore("SendNotification", {
        Title = "Anti-AFK",
        Text = "Activado correctamente",
        Duration = 5
    })
end)

-- Killer Tab

killerTab:AddToggle("Auto Kill (Punch)", false, function(state)
    autoPunchAll = state
    task.spawn(function()
        while autoPunchAll do
            pcall(function()
                local backpack = player:WaitForChild("Backpack")
                local character = player.Character or player.CharacterAdded:Wait()
                local hrp = character:FindFirstChild("HumanoidRootPart")
                local tool = backpack:FindFirstChild("Punch") or character:FindFirstChild("Punch")
                if tool and tool.Parent ~= character then
                    tool.Parent = character
                end
                for _, otherPlayer in ipairs(game.Players:GetPlayers()) do
                    if not autoPunchAll then break end
                    if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") then
                        hrp.CFrame = otherPlayer.Character.HumanoidRootPart.CFrame + Vector3.new(0, 2, 0)
                        if tool and tool.Activate then
                            tool:Activate()
                        end
                        task.wait(1.2)
                    end
                end
            end)
            task.wait(1)
        end
    end)
end)

killerTab:AddToggle("Auto Kill (Pisotear)", false, function(state)
    autoStomp = state
    task.spawn(function()
        while autoStomp do
            pcall(function()
                equipStomp()
                local character = player.Character
                local root = character and character:FindFirstChild("HumanoidRootPart")
                local tool = character and character:FindFirstChild("Stomp")
                if tool and root then
                    for _, otherPlayer in pairs(game.Players:GetPlayers()) do
                        if otherPlayer ~= player and otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart") and otherPlayer.Character:FindFirstChild("Humanoid") and otherPlayer.Character.Humanoid.Health > 0 then
                            local targetRoot = otherPlayer.Character.HumanoidRootPart
                            root.CFrame = targetRoot.CFrame + Vector3.new(0, 2, 0)
                            tool:Activate()
                            task.wait(0.2)
                        end
                    end
                end
            end)
            task.wait(0.5)
        end
    end)
end)

killerTab:AddToggle("Auto Kill (Demon Sword)", false, function(state)
    autoKill = state
    task.spawn(function()
        while autoKill do
            pcall(function()
                local character = player.Character or player.CharacterAdded:Wait()
                local humanoidRoot = character:FindFirstChild("HumanoidRootPart")
                local tool = character:FindFirstChild("Demon Sword") or player.Backpack:FindFirstChild("Demon Sword")
                if tool and tool.Parent ~= character then
                    tool.Parent = character
                end
                if not character:FindFirstChild("Demon Sword") then return end
                for _, p in ipairs(game.Players:GetPlayers()) do
                    if p ~= player and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                        local enemyHRP = p.Character.HumanoidRootPart
                        humanoidRoot.CFrame = enemyHRP.CFrame * CFrame.new(0, 0, 2)
                        local sword = character:FindFirstChild("Demon Sword")
                        if sword then
                            sword:Activate()
                        end
                        task.wait(0.3)
                    end
                end
            end)
            task.wait(1)
        end
    end)
end)

-- Players tab: Teleport buttons dynamically created

for _, p in ipairs(game.Players:GetPlayers()) do
    if p ~= player then
        playersTab:AddButton("Teleport to " .. p.Name, function()
            if p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local myChar = player.Character
                if myChar and myChar:FindFirstChild("HumanoidRootPart") then
                    myChar.HumanoidRootPart.CFrame = p.Character.HumanoidRootPart.CFrame + Vector3.new(0, 3, 0)
                    dRay:Notify("Teletransportado a " .. p.Name)
                end
            end
        end)
    end
end

-- Credits tab

creditsTab:AddLabel("╭──────────────────────────╮")
creditsTab:AddLabel("   Script hecho por Isabella")
creditsTab:AddLabel("╰──────────────────────────╯")
creditsTab:AddLabel("User de Roblox: MissSherya")
creditsTab:AddLabel("Instagram: Sherya_Luck")
creditsTab:AddLabel("TikTok: Sherya6000")
creditsTab:AddLabel("Discord: Isabella_hrz")
creditsTab:AddLabel("Gracias por usar el script")

