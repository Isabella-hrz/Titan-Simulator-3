-- WHITELIST
local whitelist = {
    ["MissSherya"] = true,
    ["luis_109170"] = true,
    ["JohanAxelRS"] = true,
    ["elpepeandasuelto300"] = true,
    ["Alexqwq124"] = true,
    ["Cesar0_o1"] = true,
}

local Players = game:GetService("Players")
local player = Players.LocalPlayer

if not whitelist[player.Name] then
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Acceso Denegado",
        Text = "No est√°s autorizado para usar este script.",
        Duration = 10
    })
    return
end

-- CARGAR UI
local DrRayLibrary = loadstring(game:HttpGet("https://raw.githubusercontent.com/AZYsGithub/DrRay-UI-Library/main/DrRay.lua"))()
local window = DrRayLibrary:Load("Sherya Script", "Default")

-- TABS
local mainTab = DrRayLibrary.newTab("Main", "rbxassetid://7734053499")
local miscTab = DrRayLibrary.newTab("Misc", "rbxassetid://7734053499")
local killerTab = DrRayLibrary.newTab("Killer", "rbxassetid://7734053499")
local playersTab = DrRayLibrary.newTab("Players", "rbxassetid://7734053499")
local creditsTab = DrRayLibrary.newTab("Credits", "rbxassetid://7734053499")

-- FUNCIONES
local function equipTool(name)
    local backpack = player:WaitForChild("Backpack")
    local character = player.Character or player.CharacterAdded:Wait()
    local tool = backpack:FindFirstChild(name) or character:FindFirstChild(name)
    if tool then tool.Parent = character end
end

-- MAIN TAB
local autoGolpe = false
mainTab.newToggle("Auto Golpe", "Activa el auto ataque", false, function(state)
    autoGolpe = state
    task.spawn(function()
        while autoGolpe do
            pcall(function()
                local character = player.Character or player.CharacterAdded:Wait()
                local herramienta = character:FindFirstChildOfClass("Tool") or player.Backpack:FindFirstChildOfClass("Tool")
                if herramienta then
                    herramienta:Activate()
                end
            end)
            task.wait(0.2)
        end
    end)
end)

local autoOrb = false
mainTab.newToggle("Auto Orbs", "Atrae las orbes", false, function(state)
    autoOrb = state
    task.spawn(function()
        while autoOrb do
            for _, v in pairs(workspace:GetChildren()) do
                if v.Name == "Drop" and v:IsA("BasePart") then
                    v.CFrame = player.Character.HumanoidRootPart.CFrame
                end
            end
            task.wait(1)
        end
    end)
end)

local autoRebirth = false
mainTab.newToggle("Auto Renacer", "Hace renacimiento autom√°tico", false, function(state)
    autoRebirth = state
    task.spawn(function()
        while autoRebirth do
            pcall(function()
                local gui = player:WaitForChild("PlayerGui")
                local renacer = gui:FindFirstChild("RENACER", true)
                if renacer then
                    renacer:Activate()
                    task.wait(1)
                    local inputBox = gui:FindFirstChildWhichIsA("TextBox", true)
                    if inputBox then
                        inputBox.Text = "yes"
                        task.wait(0.5)
                        inputBox:ReleaseFocus()
                    end
                    local confirmar = gui:FindFirstChild("CONFIRMAR", true)
                    if confirmar then
                        confirmar:Activate()
                    end
                end
            end)
            task.wait(3)
        end
    end)
end)

-- MISC TAB
miscTab.newButton("Anti-AFK", "Evita que te expulsen por inactividad", function()
    local vu = game:service("VirtualUser")
    game:service("Players").LocalPlayer.Idled:connect(function()
        vu:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
        task.wait(1)
        vu:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    end)
end)

miscTab.newSlider("Velocidad", "Cambia la velocidad", 16, 500, 16, function(value)
    player.Character.Humanoid.WalkSpeed = value
end)

miscTab.newButton("Equipar Velocidad", "Equipa Speed Tool", function()
    equipTool("Speed")
end)

miscTab.newToggle("No Clip", "Atraviesa paredes (activar en lugares seguros)", false, function(state)
    if state then
        game:GetService("RunService").Stepped:Connect(function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character:FindFirstChild("Humanoid"):ChangeState(11)
            end
        end)
    end
end)

miscTab.newToggle("Fly", "Vuela presionando 'E'", false, function(state)
    _G.Flying = state
    if state then
        loadstring(game:HttpGet("https://pastebin.com/raw/xT9bL5yS"))()
    end
end)

miscTab.newButton("Chat Esp√≠a", "Ves mensajes de otros jugadores", function()
    loadstring(game:HttpGet("https://pastebin.com/raw/eYzQaqcG"))()
end)

-- KILLER TAB
local VisualGather = false
killerTab.newToggle("Juntar Jugadores (Visual)", "Acerca visualmente a los jugadores", false, function(state)
    VisualGather = state
    task.spawn(function()
        while VisualGather do
            for _, plr in pairs(Players:GetPlayers()) do
                if plr ~= player and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
                    plr.Character.HumanoidRootPart.CFrame = player.Character.HumanoidRootPart.CFrame + Vector3.new(math.random(-5,5),0,math.random(-5,5))
                end
            end
            task.wait(2)
        end
    end)
end)

killerTab.newButton("Equipar Pisotear", "Equipa herramienta Pisotear", function()
    equipTool("Pisotear")
end)

killerTab.newButton("Pisotear Todos", "Usa Pisotear contra todos", function()
    equipTool("Pisotear")
    local tool = player.Character:FindFirstChild("Pisotear")
    if tool then
        tool:Activate()
    end
end)

killerTab.newButton("Golpear Todos", "Usa Golpe contra todos", function()
    equipTool("Golpe")
    local tool = player.Character:FindFirstChild("Golpe")
    if tool then
        tool:Activate()
    end
end)

-- PLAYERS TAB
playersTab.newDropdown("Seleccionar Jugador", "Elige un jugador", {}, function(targetName)
    local target = Players:FindFirstChild(targetName)
    if target and target.Character then
        game.Workspace.CurrentCamera.CameraSubject = target.Character:FindFirstChild("Humanoid")
    end
end)

playersTab.newButton("Ver Stats", "Muestra las estad√≠sticas del jugador", function()
    local target = Players:GetPlayerFromCharacter(game.Workspace.CurrentCamera.CameraSubject.Parent)
    if target and target:FindFirstChild("leaderstats") then
        local stats = target.leaderstats
        print("Poder:", stats:FindFirstChild("Poder") and stats.Poder.Value)
        print("Renacers:", stats:FindFirstChild("Renacers") and stats.Renacers.Value)
        print("Kills:", stats:FindFirstChild("Kills") and stats.Kills.Value)
    end
end)

-- CREDITS TAB
creditsTab.newLabel("Script hecho por isabella (sherya) üíú")
creditsTab.newLabel("Librer√≠a DrRay UI por AZY")
creditsTab.newLabel("Migrado desde Elerium por ChatGPT")
